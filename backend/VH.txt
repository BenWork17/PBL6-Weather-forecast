Tá»•ng há»£p cÃ¡c ná»™i dung Ä‘Ã£ kiá»ƒm tra vÃ  Ä‘á» xuáº¥t (tá»± Ä‘á»™ng sinh bá»Ÿi GitHub Copilot)

1) TÃ³m táº¯t nhanh cÃ¡c váº¥n Ä‘á» & sá»­a Ä‘Ã£ tháº£o luáº­n
- UV Index: Backend khÃ´ng tráº£ vá» trÆ°á»ng uv_index. ÄÃ£ Ä‘á» xuáº¥t tÃ­nh UV tá»« solar radiation (CLRSKY_SFC_SW_DWN) báº±ng cÃ´ng thá»©c xáº¥p xá»‰: UV â‰ˆ round(solar_radiation / 25), ban Ä‘Ãªm = 0.
- Weather service (weather-forecast/lib/weather-service.ts): ThÃªm hÃ m calculateUVIndex(solarRadiation, hour), tÃ­nh uv_index cho current vÃ  hourly; giá»¯ nguyÃªn logic cÅ© (feels like, condition, icon).
- Header / Navigation UI:
  - Váº¥n Ä‘á»: nÃºt "Äá»‹a Ä‘iá»ƒm" bá»‹ che khuáº¥t.
  - Äá» xuáº¥t: weather-navigation.tsx â€” dÃ¹ng ScrollArea vá»›i whitespace-nowrap, min-w-max cho container, flex-shrink-0 cho button Ä‘á»ƒ trÃ¡nh bá»‹ co; overflow-x-auto hoáº·c flex-wrap theo breakpoint náº¿u cáº§n.
- Theme toggle:
  - Váº¥n Ä‘á»: cháº¿ Ä‘á»™ "system" bá»‹ trÃ¹ng vá»›i "dark".
  - ÄÃ£ Ä‘á» xuáº¥t: sá»­a components/theme-toggle.tsx Ä‘á»ƒ sá»­ dá»¥ng useTheme() Ä‘áº§y Ä‘á»§ (theme vs systemTheme), hiá»ƒn thá»‹ icon Monitor cho system, xá»­ lÃ½ mounted Ä‘á»ƒ trÃ¡nh hydration mismatch, highlight option Ä‘ang chá»n.

2) Vá»‹ trÃ­ code liÃªn quan (backend + frontend)
- Frontend (next app)
  - components/weather-header.tsx
  - components/weather-navigation.tsx
  - components/theme-toggle.tsx
  - lib/weather-service.ts
- Backend (e:\weather-forecast\backend)
  - app/scheduler.py (hiá»‡n chá»‰ collect dá»¯ liá»‡u má»—i 1h)
  - app/ml/model.py (class WeatherModel, chá»‰ cÃ³ pháº§n predict; thiáº¿u retrain pipeline)
  - model/train_lstm.py, train_lstm2.py, train_lstm_embedding.py (scripts training hiá»‡n cÃ³)
  - model/ (thÆ° má»¥c chá»©a best_model.h5, cÃ¡c model trained)
  - dataset/ (dá»¯ liá»‡u thu tháº­p, processed/)

3) Káº¿t luáº­n hiá»‡n tráº¡ng retrain
- Hiá»‡n táº¡i scheduler (app/scheduler.py) chá»‰ cháº¡y collect_weather_data má»—i 1 giá».
- KhÃ´ng cÃ³ job tá»± Ä‘á»™ng retrain model.
- Scripts train tá»“n táº¡i trong folder model/ nhÆ°ng pháº£i cháº¡y thá»§ cÃ´ng.

4) Quy trÃ¬nh retrain chuáº©n (Ä‘á» xuáº¥t triá»ƒn khai)
- Pre-checks:
  - Kiá»ƒm tra Ä‘á»§ dá»¯ liá»‡u tá»•ng (vÃ­ dá»¥ MIN_TOTAL_RECORDS = 5000) vÃ  dá»¯ liá»‡u má»›i trong 7 ngÃ y (MIN_RECENT_RECORDS = 1000).
  - Kiá»ƒm tra cháº¥t lÆ°á»£ng data (missing rate < 5%, outlier rate < 10%).
  - Kiá»ƒm tra thá»i gian ká»ƒ tá»« láº§n train trÆ°á»›c (vÃ­ dá»¥ >= 3-7 ngÃ y).
  - Kiá»ƒm tra tÃ i nguyÃªn há»‡ thá»‘ng (RAM, CPU).
- Backup:
  - Backup model file (.h5) vÃ  scaler (.pkl) vÃ o thÆ° má»¥c backups vá»›i timestamp; lÆ°u metadata; giá»¯ giá»›i háº¡n sá»‘ backup.
- Training:
  - Cháº¡y script training (train_lstm.py) vá»›i callbacks: ModelCheckpoint, EarlyStopping, ReduceLROnPlateau.
  - LÆ°u checkpoint tá»‘t nháº¥t.
- Validation:
  - ÄÃ¡nh giÃ¡ trÃªn táº­p test/holdout báº±ng MAE, RMSE, R2, MAPE.
  - So sÃ¡nh vá»›i model hiá»‡n táº¡i; quyáº¿t Ä‘á»‹nh deploy theo threshold (vÃ­ dá»¥ MAE giáº£m > 5% => deploy).
- Deployment & Rollback:
  - Náº¿u deploy, lÆ°u model má»›i vÃ o settings.MODEL_PATH vÃ  reload service (hot reload if possible).
  - Náº¿u khÃ´ng Ä‘áº¡t, restore tá»« backup.
- Notification & logging:
  - Gá»­i bÃ¡o cÃ¡o (email/Slack), ghi log chi tiáº¿t vá» káº¿t quáº£ training, metrics, vÃ  hÃ nh Ä‘á»™ng.

5) Lá»‹ch trÃ¬nh Ä‘á» xuáº¥t (scheduler)
- Option khuyáº¿n nghá»‹ (Hybrid):
  - Thu tháº­p data: má»—i 1 giá» (hiá»‡n cÃ³).
  - Kiá»ƒm tra Ä‘iá»u kiá»‡n vÃ  retrain adaptive: cháº¡y check_data_and_retrain má»—i 3 ngÃ y.
  - Fixed scheduled retrain (dá»± phÃ²ng): hÃ ng tuáº§n (Chá»§ nháº­t 02:00 AM).
- Náº¿u muá»‘n Ä‘Æ¡n giáº£n: chá»‰ dÃ¹ng cron hÃ ng tuáº§n.

6) Äá» xuáº¥t thay Ä‘á»•i code (tÃ³m táº¯t)
- Táº¡o file app/ml/model.py hoáº·c má»Ÿ rá»™ng file hiá»‡n táº¡i: thÃªm hÃ m retrain_model(), _backup_current_model(), _run_training_script(), _restore_backup(), check_data_and_retrain(), get_retrain_status().
- Cáº­p nháº­t app/scheduler.py Ä‘á»ƒ Ä‘Äƒng kÃ½ job má»›i:
  - scheduler.add_job(check_data_and_retrain, 'cron', day_of_week='sun', hour=2, id='retrain_weekly')
  - hoáº·c scheduler.add_job(check_data_and_retrain, 'interval', days=3, id='retrain_adaptive')
- Trong retrain pipeline: cháº¡y script model/train_lstm.py (subprocess.run), backup trÆ°á»›c khi cháº¡y, validate sau khi cháº¡y, restore náº¿u tháº¥t báº¡i.
- ThÃªm API endpoint (tuá»³ chá»n) Ä‘á»ƒ kiá»ƒm tra tráº¡ng thÃ¡i retrain vÃ  trigger thá»§ cÃ´ng.

7) Quy trÃ¬nh dá»± bÃ¡o model (input â†’ output)
- Input:
  - Location (latitude, longitude)
  - Historical data: 48 giá» (2 ngÃ y) gáº§n nháº¥t; má»—i record gá»“m datetime, temperature, pressure, humidity, wind_speed, precipitation, solar_radiation, v.v.
- Feature engineering: táº¡o ~19 features/giá» (vá»‹ trÃ­, thá»i gian, weather vars, cyclical features sin/cos, lag, trend, is_daytime).
- Shape cho LSTM: (1, 48, N_features) â€” N_features vÃ­ dá»¥ 19.
- Model: LSTM stack -> Dense -> Reshape â†’ output (24, 6).
- Output raw: 24 giá» forecast, má»—i giá» 6 biáº¿n (vÃ­ dá»¥ CLRSKY_SFC_SW_DWN, PS, T2M, QV2M, WS10M, PRECTOTCORR).
- Post-process: inverse scale, convert variables, tÃ­nh UV tá»« solar, xÃ¡c Ä‘á»‹nh condition, chuáº©n hoÃ¡ icon, feels-like.
- Metadata tráº£ vá»: model_version, generated_at, confidence.

8) Dá»± bÃ¡o nhiá»u ngÃ y
- Hai cÃ¡ch:
  - Recursive (Ä‘á»‡ quy): dÃ¹ng output lÃ m input cho bÆ°á»›c tiáº¿p theo. Æ¯u: nhanh, khÃ´ng train láº¡i. NhÆ°á»£c: sai sá»‘ tÃ­ch lÅ©y, giáº£m Ä‘á»™ chÃ­nh xÃ¡c sau vÃ i ngÃ y.
  - Multi-day model: train láº¡i model Ä‘á»ƒ output 168h (7 ngÃ y) hoáº·c nhiá»u hÆ¡n. Æ¯u: á»•n Ä‘á»‹nh hÆ¡n; NhÆ°á»£c: cáº§n nhiá»u dá»¯ liá»‡u, thá»i gian train vÃ  thay Ä‘á»•i pipeline.
- Khuyáº¿n nghá»‹: nhanh implement recursive Ä‘á»ƒ há»— trá»£ 7-14 ngÃ y; káº¿ hoáº¡ch dÃ i háº¡n lÃ  train model multi-day.

9) HÃ nh Ä‘á»™ng tiáº¿p theo tÃ´i cÃ³ thá»ƒ lÃ m cho báº¡n (chá»n 1):
- A. Implement retrain pipeline (app/ml/model.py) + cáº­p nháº­t scheduler (app/scheduler.py) (Hybrid schedule).
- B. ThÃªm API endpoint Ä‘á»ƒ trigger retrain thá»§ cÃ´ng vÃ  xem tráº¡ng thÃ¡i.
- C. Implement recursive multi-day prediction trong WeatherModel (predict_multi_day).
- D. Sá»­a frontend: weather-navigation.tsx (fix overflow), theme-toggle.tsx (fix system theme), weather-service.ts (thÃªm UV calc).
- E. Ghi toÃ n bá»™ ná»™i dung nÃ y vÃ o file VH.txt (Ä‘Ã£ thá»±c hiá»‡n).

10) Ghi chÃº ngáº¯n
- Hiá»‡n tráº¡ng: há»‡ thá»‘ng thu tháº­p dá»¯ liá»‡u tá»± Ä‘á»™ng nhÆ°ng retrain váº«n manual.
- Triá»ƒn khai retrain tá»± Ä‘á»™ng cáº§n cáº©n trá»ng: backup, validation, rollback, thÃ´ng bÃ¡o.
- TÃ´i Ä‘Ã£ ghi láº¡i toÃ n bá»™ tÃ³m táº¯t nÃ y trong file VH.txt á»Ÿ Ä‘Æ°á»ng dáº«n trÃªn.

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        INPUT                                 â”‚
â”‚  - Vá»‹ trÃ­: (lat, lon)                                       â”‚
â”‚  - 48 giá» history Ã— 6 biáº¿n khÃ­ tÆ°á»£ng                        â”‚
â”‚  = 48 records                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FEATURE ENGINEERING                             â”‚
â”‚  48 records Ã— 19 features = (48, 19) matrix                 â”‚
â”‚  - Location: 2                                              â”‚
â”‚  - Time: 4                                                  â”‚
â”‚  - Weather: 6                                               â”‚
â”‚  - Cyclical: 2                                              â”‚
â”‚  - Lag & Trend: 4                                           â”‚
â”‚  - Day/Night: 1                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 NORMALIZATION                                â”‚
â”‚  MinMaxScaler: values â†’ [0, 1]                              â”‚
â”‚  Shape: (1, 48, 19)                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   LSTM MODEL                                 â”‚
â”‚  Input: (1, 48, 19)                                         â”‚
â”‚    â†“                                                        â”‚
â”‚  LSTM(128) â†’ Dropout â†’ LSTM(64) â†’ Dropout                   â”‚
â”‚    â†“                                                        â”‚
â”‚  LSTM(32) â†’ Dropout â†’ Dense(144) â†’ Reshape                  â”‚
â”‚    â†“                                                        â”‚
â”‚  Output: (1, 24, 6)                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DENORMALIZATION                                 â”‚
â”‚  [0, 1] â†’ Real values                                       â”‚
â”‚  Shape: (24, 6)                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                POST-PROCESSING                               â”‚
â”‚  - Calculate UV Index tá»« Solar Radiation                    â”‚
â”‚  - Determine Weather Condition                              â”‚
â”‚  - Calculate Feels Like Temperature                         â”‚
â”‚  - Add icons & descriptions                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      OUTPUT                                  â”‚
â”‚  24 giá» forecast Ã— (temp, humidity, pressure, wind,         â”‚
â”‚                     rain, solar, UV, condition, icon)        â”‚
â”‚  Format: JSON vá»›i metadata                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ“¥ INPUT (Äáº§u vÃ o)
1. Dá»¯ liá»‡u cáº§n thiáº¿t
# Cáº§n 48 giá» dá»¯ liá»‡u lá»‹ch sá»­ gáº§n nháº¥t
input_data = {
    "location": {
        "latitude": 16.0544,   # VÄ© Ä‘á»™
        "longitude": 108.2022  # Kinh Ä‘á»™
    },
    "historical_data": [
        # 48 records (2 ngÃ y) gáº§n nháº¥t
        {
            "datetime": "2025-12-15 00:00:00",
            "temperature": 22.5,        # Â°C
            "humidity": 75.0,           # %
            "pressure": 1013.2,         # hPa
            "wind_speed": 3.5,          # m/s
            "precipitation": 0.0,       # mm
            "solar_radiation": 0.0      # W/mÂ²
        },
        # ... 47 records ná»¯a (má»—i giá»)
        {
            "datetime": "2025-12-16 23:00:00",
            "temperature": 23.1,
            "humidity": 78.0,
            "pressure": 1012.8,
            "wind_speed": 2.8,
            "precipitation": 0.5,
            "solar_radiation": 120.5
        }
    ]
}
2. Feature Engineering
# Tá»« má»—i record, model táº¡o 19 features:
features_per_hour = [
    # 1-2: Vá»‹ trÃ­
    latitude,                    # 16.0544
    longitude,                   # 108.2022
    
    # 3-6: Thá»i gian
    hour,                        # 0-23
    day,                         # 1-31
    month,                       # 1-12
    season,                      # 1-4 (Spring/Summer/Fall/Winter)
    
    # 7-12: Dá»¯ liá»‡u khÃ­ tÆ°á»£ng
    wind_speed,                  # m/s
    humidity,                    # %
    pressure,                    # hPa
    precipitation,               # mm
    temperature,                 # Â°C
    solar_radiation,             # W/mÂ²
    
    # 13-14: Cyclical features
    sin(2Ï€ * hour / 24),        # Chu ká»³ giá» trong ngÃ y
    cos(2Ï€ * hour / 24),
    
    # 15-18: Lag features
    temperature_lag1,            # Nhiá»‡t Ä‘á»™ giá» trÆ°á»›c
    precipitation_lag1,          # LÆ°á»£ng mÆ°a giá» trÆ°á»›c
    temperature_trend,           # Xu hÆ°á»›ng nhiá»‡t Ä‘á»™
    precipitation_trend,         # Xu hÆ°á»›ng mÆ°a
    
    # 19: Day/Night
    is_daytime                   # 1 náº¿u 6h-18h, 0 náº¿u ban Ä‘Ãªm
]
3. Input Shape cho LSTM
# Input shape: (batch_size, timesteps, features)
X_input = np.array([
    [  # Batch 1 (chá»‰ cÃ³ 1 batch khi predict)
        [feature_hour_0],   # 19 features
        [feature_hour_1],   # 19 features
        ...
        [feature_hour_47]   # 19 features
    ]
])

# Shape: (1, 48, 19)
#        â”‚  â”‚   â””â”€ 19 features
#        â”‚  â””â”€â”€â”€â”€â”€ 48 timesteps (giá»)
#        â””â”€â”€â”€â”€â”€â”€â”€â”€ 1 sample
ğŸ”„ PROCESSING (Xá»­ lÃ½)
1. Data Normalization
# Chuáº©n hÃ³a features vá» [0, 1]
from sklearn.preprocessing import MinMaxScaler

scaler_X = MinMaxScaler()
X_scaled = scaler_X.transform(X_input.reshape(-1, 19))
X_scaled = X_scaled.reshape(1, 48, 19)

# VÃ­ dá»¥:
# Temperature: 22.5Â°C â†’ 0.45 (sau scale)
# Humidity: 75% â†’ 0.75
# ...
2. Model Architecture
Model: LSTM vá»›i kiáº¿n trÃºc:

Input (1, 48, 19)
    â†“
LSTM Layer 1 (128 units, return_sequences=True)
    â†“
Dropout (0.2)
    â†“
LSTM Layer 2 (64 units, return_sequences=True)
    â†“
Dropout (0.2)
    â†“
LSTM Layer 3 (32 units, return_sequences=False)
    â†“
Dropout (0.2)
    â†“
Dense Layer (24 * 6 = 144 units)
    â†“
Reshape (24, 6)
    â†“
Output (24 giá», 6 biáº¿n)
ğŸ¯ VÃ Dá»¤ Cá»¤ THá»‚
INPUT Example:
{
  "location_name": "ÄÃ  Náºµng",
  "current_time": "2025-12-15 17:00:00",
  "historical_48h": [
    // 48 giá» tá»« 2025-12-13 17:00 â†’ 2025-12-15 16:00
    {
      "datetime": "2025-12-13T17:00:00",
      "temp": 28.5,
      "humidity": 65,
      "pressure": 1012,
      "wind": 4.2,
      "rain": 0,
      "solar": 450.5
    },
    // ... 46 records
    {
      "datetime": "2025-12-15T16:00:00",
      "temp": 29.2,
      "humidity": 68,
      "pressure": 1011,
      "wind": 3.8,
      "rain": 0,
      "solar": 380.2
    }
  ]
}
PROCESSING:
Step 1: Feature Engineering
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
48 records Ã— 19 features = (48, 19) matrix

Example row (hour 16:00):
[16.0544, 108.2022, 16, 15, 12, 4, 3.8, 68, 1011, 0, 29.2, 380.2, 
 0.707, 0.707, 29.1, 0, 0.05, 0, 1]

Step 2: Normalization
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Min-Max scaling: values â†’ [0, 1]

Example: Temperature 29.2Â°C
Min temp in data: -10Â°C
Max temp in data: 45Â°C
Scaled: (29.2 - (-10)) / (45 - (-10)) = 0.71

Step 3: Reshape for LSTM
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(48, 19) â†’ (1, 48, 19)
â”‚         â”‚  â”‚   â””â”€ 19 features
â”‚         â”‚  â””â”€â”€â”€â”€â”€ 48 timesteps
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€ 1 batch

Step 4: LSTM Prediction
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Input:  (1, 48, 19)
Output: (1, 24, 6)
        â”‚  â”‚   â””â”€ 6 variables
        â”‚  â””â”€â”€â”€â”€â”€ 24 hours forecast
        â””â”€â”€â”€â”€â”€â”€â”€â”€ 1 batch

Step 5: Denormalization
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Scaled values â†’ Real values

Example:
Scaled temp: 0.72
Real temp: 0.72 Ã— (45 - (-10)) + (-10) = 29.6Â°C
OUTPUT Example:
{
  "location": {
    "name": "ÄÃ  Náºµng",
    "latitude": 16.0544,
    "longitude": 108.2022
  },
  "forecast": [
    {
      "date": "2025-12-15",
      "hourly": [
        {
          "datetime": "2025-12-15T17:00:00",
          "hour": 17,
          "temperature": 29.6,
          "feels_like": 32.1,
          "humidity": 70,
          "pressure": 1010.5,
          "wind_speed": 3.5,
          "wind_direction": 120,
          "precipitation": 0.0,
          "precipitation_probability": 10,
          "solar_radiation": 350.2,
          "uv_index": 7,
          "cloud_cover": 45,
          "visibility": 10,
          "condition": "Partly Cloudy",
          "description": "Trá»i náº¯ng giÃ¡n Ä‘oáº¡n, cÃ³ mÃ¢y ráº£i rÃ¡c",
          "icon": "cloud-sun"
        },
        {
          "datetime": "2025-12-15T18:00:00",
          "hour": 18,
          "temperature": 28.8,
          "feels_like": 31.2,
          "humidity": 72,
          "pressure": 1010.8,
          "wind_speed": 3.2,
          "wind_direction": 115,
          "precipitation": 0.0,
          "precipitation_probability": 15,
          "solar_radiation": 180.5,
          "uv_index": 3,
          "cloud_cover": 50,
          "visibility": 10,
          "condition": "Cloudy",
          "description": "Trá»i nhiá»u mÃ¢y",
          "icon": "cloud"
        },
        {
          "datetime": "2025-12-15T19:00:00",
          "hour": 19,
          "temperature": 27.5,
          "feels_like": 29.8,
          "humidity": 75,
          "pressure": 1011.2,
          "wind_speed": 2.8,
          "wind_direction": 110,
          "precipitation": 0.2,
          "precipitation_probability": 30,
          "solar_radiation": 45.0,
          "uv_index": 0,
          "cloud_cover": 65,
          "visibility": 8,
          "condition": "Light Rain",
          "description": "CÃ³ mÆ°a nhá» ráº£i rÃ¡c",
          "icon": "cloud-drizzle"
        },
        // ... 21 giá» tiáº¿p theo
        {
          "datetime": "2025-12-16T16:00:00",
          "hour": 16,
          "temperature": 30.2,
          "feels_like": 33.5,
          "humidity": 68,
          "pressure": 1009.8,
          "wind_speed": 4.0,
          "wind_direction": 125,
          "precipitation": 5.5,
          "precipitation_probability": 70,
          "solar_radiation": 420.0,
          "uv_index": 8,
          "cloud_cover": 80,
          "visibility": 6,
          "condition": "Rainy",
          "description": "MÆ°a vá»«a Ä‘áº¿n mÆ°a to",
          "icon": "cloud-rain"
        }
      ]
    }
  ],
  "metadata": {
    "generated_at": "2025-12-15T17:00:00",
    "model_version": "1.2.3",
    "forecast_hours": 24,
    "confidence": 0.85
  }
}
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Kiá»ƒm tra Ä‘iá»u  â”‚
â”‚  kiá»‡n retrain   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      PASS     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Äá»§ dá»¯ liá»‡u?    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Backup model   â”‚
â”‚  Data quality?  â”‚                â”‚  hiá»‡n táº¡i       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ FAIL                              â”‚
         â”‚                                   â–¼
         â–¼                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚  Chuáº©n bá»‹ data  â”‚
â”‚  Ghi log & Dá»«ng â”‚                â”‚  training       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚  Train model    â”‚
                                   â”‚  má»›i            â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚  Validate model â”‚
                                   â”‚  (metrics)      â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â–¼                   â–¼                   â–¼
                   âœ… GOOD            âš ï¸ ACCEPTABLE        âŒ BAD
                        â”‚                   â”‚                   â”‚
                        â–¼                   â–¼                   â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Deploy model   â”‚  â”‚  Cáº£nh bÃ¡o nhÆ°ng â”‚  â”‚  Restore backup â”‚
              â”‚  má»›i            â”‚  â”‚  váº«n deploy     â”‚  â”‚  Ghi log lá»—i   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚                   â”‚                   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚  Ghi log káº¿t    â”‚
                                   â”‚  quáº£ & ThÃ´ng bÃ¡oâ”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜